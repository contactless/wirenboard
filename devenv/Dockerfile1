ARG TARGET_VERSION=stretch
FROM debian:$TARGET_VERSION

#An ARG declared before the FROM instruction canâ€™t be used after the FROM..
#If you want to use it you need to declare it without the value as below.
ARG TARGET_VERSION

ENV TARGET_VERSION="$TARGET_VERSION"
ENV DEBIAN_FRONTEND noninteractive

ARG WIRENBOARD_MIRROR
ENV WIRENBOARD_MIRROR="$WIRENBOARD_MIRROR"
#ENV WIRENBOARD_MIRROR="http://releases.contactless.ru/stable"
ARG DEBIAN_MIRROR
ENV DEBIAN_MIRROR="$DEBIAN_MIRROR"
#ENV DEBIAN_MIRROR="mirror.yandex.ru"

 
RUN echo deb [arch=amd64] $WIRENBOARD_MIRROR/$TARGET_VERSION $TARGET_VERSION main > /etc/apt/sources.list.d/contactless.list
RUN sed -e "s#http\:\/\/deb.debian.org\/debian#${DEBIAN_MIRROR}#g" -i /etc/apt/sources.list && \
    apt-get update 

RUN echo 1 $(DEBIAN_MIRROR) >>/root/1.txt
RUN echo 2 $DEBIAN_MIRROR >>/root/1.txt
RUN echo 3 '$DEBIAN_MIRROR' >>/root/1.txt